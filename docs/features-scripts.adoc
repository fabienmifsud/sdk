= Feature type `SELECT` script
:toc:

NOTE: Scripts are must be written in link:https://developer.mozilla.org/en-US/docs/Web/JavaScript[JavaScript] and will be run on link:https://nodejs.org/en/[Node.js]. You can use external libraries like link:https://github.com/axios/axios[axios] as the script will be packaged with its dependencies.

== Script

=== Parameters

==== `fields`

An object with all the previous values given by the user.

.Example
[source,javascript]
----
const axios = require('axios')
const { Response } = require('@saagie/sdk')

exports.getDatasets = async ({ fields }) => {
  try {
    const { data: datasets } = await axios.get(
      `${fields.endpoint.url}/datasets`
    )

    if (!datasets ||Â !datasets.length) {
      return Response.empty('No datasets availables')
    }

    return Response.success(
      datasets.map(({ name, id }) => ({
        id,
        label: name,
      })),
    )
  }

  catch (error) {
    return Response.error('Can\'t retrieve datasets', { error })
  }
}
----


=== Return value

A `Response` from the `@saagie/sdk` package that contains an `array` of options : `{ id, label }`.
